{"ast":null,"code":"import _defineProperty from\"/Users/celestegerard/Development/code/celesteneue/chiketto_f/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/celestegerard/Development/code/celesteneue/chiketto_f/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/celestegerard/Development/code/celesteneue/chiketto_f/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/celestegerard/Development/code/celesteneue/chiketto_f/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/celestegerard/Development/code/celesteneue/chiketto_f/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{BrowserRouter as Router,Switch,Route,Link}from\"react-router-dom\";import'./App.css';import PrizesContainer from'./containers/PrizesContainer.js';import Home from'./components/Home.js';import UsersContainer from'./components/UsersContainer.js';import UserScreen from'./UserScreen.png';import PrizeScreen from'./PrizeScreen.png';import UserScreenSelect from'./UserScreenSelect.png';import PrizeScreenSelect from'./PrizeScreenSelect.png';var prizeURL=\"http://localhost:3000/api/v1/prizes\";var userURL=\"http://localhost:3000/api/v1/users\";var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);var _super=_createSuper(App);function App(){var _this;_classCallCheck(this,App);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={name:'',avatar:null,count:0,title:'',price:0,prizeimage:null,show:false,prize:'',prizeid:'',prizes:[],addPrize:false,addTicket:false,user:'',userid:'',users:[],settings:false,addChild:false,status:'',fetch:[],page:false,buyPrize:false,homepage:true,showDeletePrize:false};_this.handlePrizeSubmit=function(e){e.preventDefault();var title=e.target.parentNode.children[0].value;var price=e.target.parentNode.children[2].value.split(\" \")[0];var prizeimage=e.target.parentNode.children[4].files[0];_this.setState({title:title,price:price,prizeimage:prizeimage});};_this.postPrize=function(e){e.preventDefault();var prize=new FormData();prize.append('title',_this.state.title);prize.append('price',_this.state.price);prize.append('prizeimage',_this.state.prizeimage);prize.append('count',0);fetch(prizeURL,{method:'POST',body:prize}).catch(function(err){return console.log(err);});};_this.postChild=function(e){e.preventDefault();var child=new FormData();child.append('name',_this.state.name);child.append('avatar',_this.state.avatar);child.append('count',0);fetch(userURL,{method:'POST',body:child}).catch(function(err){return console.log(err);});};_this.subtractFromCount=function(){var _this$setState;var count=_this.state.count-_this.state.price;_this.setState({count:count});var prizeName=_this.state.prize;_this.setState((_this$setState={},_defineProperty(_this$setState,prizeName,15),_defineProperty(_this$setState,\"show\",!_this.state.show),_this$setState));};_this.incrementCount=function(e){e.preventDefault();var user=e.target.parentNode.id;var count=e.target.innerHTML;var userid=e.target.id;_this.setState({count:count,user:user,userid:userid});_this.setState({addTicket:!_this.state.addTicket});};_this.plusTicket=function(e){var id=_this.state.userid;fetch(userURL+'/'+id,{method:'PATCH',body:JSON.stringify({count:++_this.state.count}),headers:{'Content-Type':'application/json','Accept':'application/json'}}).then(function(res){return res.json();}).then(function(json){return console.log(json);});_this.setState({addTicket:!_this.state.addTicket});};_this.handleMinusClick=function(){_this.setState(function(_ref){var count=_ref.count;return{count:count-1};});};_this.handlePrizeClick=function(e){var newPrize=e.target.alt;var newPrice=_this.state[newPrize];_this.setState({prize:newPrize,price:newPrice,show:!_this.state.show});};_this.handleUserClick=function(){_this.setState({homepage:true});};_this.handleAddPrizeClick=function(){_this.setState({addPrize:!_this.state.addPrize});};_this.handleBuyPrizeClick=function(e){var prizeid=e.target.id;var price=e.target.parentNode.children[1].children[0].innerHTML;var prize=e.target.alt;_this.setState({prize:prize,price:price,prizeid:prizeid});_this.setState({buyPrize:!_this.state.buyPrize});};_this.handleSettingsCancelClick=function(){_this.setState({settings:false});};_this.AddStarNoClick=function(){_this.setState({addTicket:!_this.state.addTicket});};_this.handleStarClick=function(e){var user=e.target.alt;_this.setState({addTicket:!_this.state.addTicket,user:user});};_this.handleSettingsClick=function(){_this.setState({settings:!_this.state.settings});};_this.addChild=function(){_this.setState({addChild:!_this.state.addChild});};_this.submitChild=function(e){e.preventDefault();_this.setState({name:e.target.parentNode.children[6].value,avatar:e.target.parentNode.children[8].files[0]});};_this.deleteChild=function(e){e.preventDefault();var id=e.target.id;fetch(userURL+'/'+id,{method:'DELETE'}).then(function(res){return res.json();}).then(function(res){return console.log(res);});};_this.handlePrizePageClick=function(){_this.setState({homepage:false});};_this.deletePrize=function(e){e.preventDefault();var id=e.target.id;fetch(prizeURL+'/'+id,{method:'DELETE'}).then(function(res){return res.json();}).then(function(res){return console.log(res);});};_this.handleShowDeletePrize=function(){_this.setState({showDeletePrize:!_this.state.deletePrize});};_this.closeDeletePrize=function(){_this.setState({showDeletePrize:false});};_this.cancelBuyPrize=function(){_this.setState({buyPrize:false});};_this.prepBuyPrize=function(e){e.preventDefault();var username=e.target.parentNode.children[1].value;var finduser=_this.state.users.find(function(user){return user.name===username;});var userid=finduser.id;var count=finduser.count;var findprize=_this.state.prizes.find(function(prize){return prize.title===_this.state.prize;});var prizeid=findprize.id;_this.setState({count:count,userid:userid,prizeid:prizeid});};_this.postBuyPrize=function(e){e.preventDefault();var id=_this.state.userid;fetch(userURL+'/'+id,{method:'PATCH',body:JSON.stringify({count:_this.state.count-_this.state.price}),headers:{'Content-Type':'application/json','Accept':'application/json'}}).then(function(res){return res.json();}).then(function(json){return console.log(json);});var prizeid=_this.state.prizeid;fetch(prizeURL+'/'+prizeid,{method:'DELETE'}).then(function(res){return res.json();}).then(function(res){return console.log(res);});};return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;Promise.all([fetch(prizeURL),fetch(userURL)]).then(function(results){return Promise.all(results.map(function(r){return r.json();}));}).then(function(d){return _this2.setState({prizes:d[0],users:d[1]});});}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"App\"},/*#__PURE__*/React.createElement(Router,null,/*#__PURE__*/React.createElement(\"div\",{className:\"nav\"},/*#__PURE__*/React.createElement(Link,{to:\"/\"},this.state.homepage?/*#__PURE__*/React.createElement(\"img\",{alt:\"userscreen\",className:\"nav-button-star-yellow\",src:UserScreenSelect}):null,/*#__PURE__*/React.createElement(\"img\",{alt:\"nav star\",className:\"nav-button-star\",onClick:this.handleUserClick,src:UserScreen})),/*#__PURE__*/React.createElement(Link,{to:\"/prizes\"},!this.state.homepage?/*#__PURE__*/React.createElement(\"img\",{alt:\"nav yellow circle\",className:\"nav-button-circle-yellow\",src:PrizeScreenSelect}):null,/*#__PURE__*/React.createElement(\"img\",{alt:\"nav button circle\",className:\"nav-button-circle\",onClick:this.handlePrizePageClick,user:this.state.user,src:PrizeScreen}))),/*#__PURE__*/React.createElement(Switch,null,/*#__PURE__*/React.createElement(Route,{path:\"/users\"},/*#__PURE__*/React.createElement(UsersContainer,{users:this.state.users,prizes:this.state.prizes,subtractFromCount:this.subtractFromCount,handlePrizeClick:this.handlePrizeClick,prize:this.state.prize,show:this.state.show,count:this.state.count,plusTicket:this.plusTicket})),/*#__PURE__*/React.createElement(Route,{path:\"/prizes\"},/*#__PURE__*/React.createElement(PrizesContainer,{prepBuyPrize:this.prepBuyPrize,postBuyPrize:this.postBuyPrize,cancelBuyPrize:this.cancelBuyPrize,price:this.state.price,users:this.state.users,prize:this.state.prize,buyPrize:this.state.buyPrize,handleBuyPrizeClick:this.handleBuyPrizeClick,handleShowDeletePrize:this.handleShowDeletePrize,showDeletePrize:this.state.showDeletePrize,closeDeletePrize:this.closeDeletePrize,deletePrize:this.deletePrize,postPrize:this.postPrize,handlePrizeSubmit:this.handlePrizeSubmit,prizes:this.state.prizes,handleAddPrizeClick:this.handleAddPrizeClick,addPrize:this.state.addPrize,bouncyball:this.state.bouncyball,dino:this.state.dino,peppa:this.state.peppa,chalk:this.state.chalk,lizards:this.state.lizards,fish:this.state.fish})),/*#__PURE__*/React.createElement(Route,{path:\"/\"},/*#__PURE__*/React.createElement(Home,{user:this.state.user,cancel:this.AddStarNoClick,fetch:this.state.fetch,deleteChild:this.deleteChild,postChild:this.postChild,submitChild:this.submitChild,showAddChild:this.state.addChild,addChild:this.addChild,settings:this.state.settings,handleSettingsClick:this.handleSettingsClick,handleSettingsCancelClick:this.handleSettingsCancelClick,users:this.state.users,count:this.state.count,incrementCount:this.incrementCount,handleStarClick:this.handleStarClick,addTicket:this.state.addTicket,plusTicket:this.plusTicket})))));}}]);return App;}(Component);export default App;","map":{"version":3,"sources":["/Users/celestegerard/Development/code/celesteneue/chiketto_f/src/App.js"],"names":["React","Component","BrowserRouter","Router","Switch","Route","Link","PrizesContainer","Home","UsersContainer","UserScreen","PrizeScreen","UserScreenSelect","PrizeScreenSelect","prizeURL","userURL","App","state","name","avatar","count","title","price","prizeimage","show","prize","prizeid","prizes","addPrize","addTicket","user","userid","users","settings","addChild","status","fetch","page","buyPrize","homepage","showDeletePrize","handlePrizeSubmit","e","preventDefault","target","parentNode","children","value","split","files","setState","postPrize","FormData","append","method","body","catch","err","console","log","postChild","child","subtractFromCount","prizeName","incrementCount","id","innerHTML","plusTicket","JSON","stringify","headers","then","res","json","handleMinusClick","handlePrizeClick","newPrize","alt","newPrice","handleUserClick","handleAddPrizeClick","handleBuyPrizeClick","handleSettingsCancelClick","AddStarNoClick","handleStarClick","handleSettingsClick","submitChild","deleteChild","handlePrizePageClick","deletePrize","handleShowDeletePrize","closeDeletePrize","cancelBuyPrize","prepBuyPrize","username","finduser","find","findprize","postBuyPrize","Promise","all","results","map","r","d","bouncyball","dino","peppa","chalk","lizards","fish"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Link\n} from \"react-router-dom\";\nimport './App.css';\nimport PrizesContainer from './containers/PrizesContainer.js'\nimport Home from './components/Home.js'\nimport UsersContainer from './components/UsersContainer.js'\nimport UserScreen from './UserScreen.png'\nimport PrizeScreen from './PrizeScreen.png'\nimport UserScreenSelect from './UserScreenSelect.png'\nimport PrizeScreenSelect from './PrizeScreenSelect.png'\n\n\nconst prizeURL = \"http://localhost:3000/api/v1/prizes\"\nconst userURL = \"http://localhost:3000/api/v1/users\"\n\n\nclass App extends Component {\n\n  state = {\n    name: '',\n    avatar: null,\n    count: 0,\n    title: '',\n    price: 0,\n    prizeimage: null,\n    show: false,\n    prize: '',\n    prizeid: '',\n    prizes: [],\n    addPrize: false,\n    addTicket: false,\n    user: '',\n    userid:'',\n    users: [],\n    settings: false,\n    addChild: false,\n    status: '',\n    fetch: [],\n    page: false,\n    buyPrize: false,\n    homepage: true,\n    showDeletePrize: false\n  }\n\n\n  componentDidMount() {\n\n    Promise.all([\n      fetch( prizeURL ),\n      fetch( userURL ),\n    ]).then((results) =>\n    Promise.all(results.map(r => r.json()))\n  ).then(d => this.setState({ prizes: d[0], users: d[1] })\n)\n}\n\n\n  handlePrizeSubmit = (e) => {\n    e.preventDefault();\n    const title = e.target.parentNode.children[0].value\n    const price = e.target.parentNode.children[2].value.split(\" \")[0]\n    const prizeimage = e.target.parentNode.children[4].files[0]\n    this.setState({ title, price, prizeimage })\n  }\n\n  postPrize = (e) => {\n    e.preventDefault();\n    const prize = new FormData();\n    prize.append('title', this.state.title);\n    prize.append('price', this.state.price);\n    prize.append('prizeimage', this.state.prizeimage);\n    prize.append('count', 0);\n    fetch( prizeURL, {\n      method: 'POST',\n      body: prize\n    })\n    .catch(err => console.log(err));\n  }\n\n  postChild = (e) => {\n    e.preventDefault();\n    const child = new FormData();\n    child.append('name', this.state.name);\n    child.append('avatar', this.state.avatar);\n    child.append('count', 0);\n    fetch( userURL, {\n      method: 'POST',\n      body: child\n    })\n    .catch(err => console.log(err));\n  }\n\n  subtractFromCount = () => {\n    const count = this.state.count - this.state.price\n    this.setState({ count })\n    const prizeName = this.state.prize\n    this.setState({\n      [prizeName] : 15,\n      show: !this.state.show\n     })\n  }\n\n  incrementCount = (e) => {\n    e.preventDefault()\n    const user = e.target.parentNode.id\n    const count = e.target.innerHTML\n    const userid = e.target.id\n\n    this.setState({ count , user, userid  })\n    this.setState({ addTicket: !this.state.addTicket})\n\n  };\n\n  plusTicket = (e) => {\n\n    const id = this.state.userid\n\n    fetch( userURL + '/' + id, {\n    method: 'PATCH',\n    body: JSON.stringify({\n      count: ++this.state.count\n    }),\n    headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'application/json'\n        }\n  })\n  .then(res => res.json())\n  .then(json => console.log(json))\n\n  this.setState({ addTicket: !this.state.addTicket })\n  }\n\n\n  handleMinusClick = () => {\n    this.setState(({ count }) => ({\n      count: count - 1\n    }));\n  };\n\nhandlePrizeClick = (e) => {\n  const newPrize = e.target.alt\n  const newPrice = this.state[newPrize]\n  this.setState({\n    prize: newPrize,\n    price: newPrice,\n    show: !this.state.show\n  })\n}\n\nhandleUserClick = () => {\n  this.setState({ homepage: true })\n}\n\nhandleAddPrizeClick = () => {\n  this.setState({\n    addPrize: !this.state.addPrize\n  })\n}\n\nhandleBuyPrizeClick = (e) => {\n  const prizeid = e.target.id\n  const price = e.target.parentNode.children[1].children[0].innerHTML\n  const prize = e.target.alt\n  this.setState({ prize, price, prizeid })\n  this.setState({\n    buyPrize: !this.state.buyPrize\n  })\n}\n\nhandleSettingsCancelClick = () => {\n  this.setState({\n    settings: false\n  })\n}\n\nAddStarNoClick = () => {\n  this.setState({ addTicket: !this.state.addTicket })\n}\n\nhandleStarClick = (e) => {\n  const user = e.target.alt\n  this.setState({\n    addTicket: !this.state.addTicket,\n    user\n  })\n}\n\nhandleSettingsClick = () => {\n  this.setState({ settings: !this.state.settings })\n}\n\naddChild = () => {\n  this.setState({\n    addChild: !this.state.addChild\n  })\n}\n\nsubmitChild = (e) => {\n  e.preventDefault()\n\n  this.setState({\n    name: e.target.parentNode.children[6].value,\n    avatar: e.target.parentNode.children[8].files[0]\n   })\n}\n\n\ndeleteChild = (e) => {\n  e.preventDefault();\n  const id = e.target.id\n  fetch( userURL + '/' + id, {\n    method: 'DELETE',\n  })\n  .then(res => res.json())\n  .then(res => console.log(res))\n}\n\nhandlePrizePageClick = () => {\n  this.setState({ homepage: false })\n}\n\ndeletePrize = (e) => {\n  e.preventDefault();\n  const id = e.target.id\n  fetch( prizeURL + '/' + id, {\n    method: 'DELETE',\n  })\n  .then(res => res.json())\n  .then(res => console.log(res))\n}\n\nhandleShowDeletePrize = () => {\n  this.setState({\n    showDeletePrize: !this.state.deletePrize\n   })\n}\n\ncloseDeletePrize = () => {\n  this.setState({ showDeletePrize: false })\n}\n\ncancelBuyPrize = () => {\n  this.setState({ buyPrize: false })\n}\n\nprepBuyPrize = (e) => {\n  e.preventDefault()\n  const username = e.target.parentNode.children[1].value\n  const finduser = this.state.users.find( user => user.name === username )\n  const userid = finduser.id\n  const count = finduser.count\n\n  const findprize = this.state.prizes.find( prize => prize.title === this.state.prize)\n  const prizeid = findprize.id\n\n  this.setState({ count, userid, prizeid })\n\n}\n\npostBuyPrize = (e) => {\n  e.preventDefault()\n\n  const id = this.state.userid\n\n  fetch( userURL + '/' + id, {\n  method: 'PATCH',\n  body: JSON.stringify({\n    count: this.state.count - this.state.price\n  }),\n  headers: {\n        'Content-Type': 'application/json',\n        'Accept': 'application/json'\n      }\n})\n.then(res => res.json())\n.then(json => console.log(json))\n\n\nconst prizeid = this.state.prizeid\n\nfetch( prizeURL + '/' + prizeid, {\n  method: 'DELETE',\n})\n.then(res => res.json())\n.then(res => console.log(res))\n\n}\n\n  render() {\n\n    return (\n      <div className=\"App\">\n        <Router>\n          <div className=\"nav\">\n            <Link to=\"/\">\n              { this.state.homepage ? <img alt=\"userscreen\" className=\"nav-button-star-yellow\" src={UserScreenSelect} /> : null }\n              <img alt=\"nav star\" className=\"nav-button-star\" onClick={this.handleUserClick} src={UserScreen} />\n            </Link>\n            <Link to=\"/prizes\">\n              { !this.state.homepage ? <img alt=\"nav yellow circle\" className=\"nav-button-circle-yellow\" src={PrizeScreenSelect} /> : null }\n              <img alt=\"nav button circle\" className=\"nav-button-circle\" onClick={this.handlePrizePageClick}  user={this.state.user} src={PrizeScreen} />\n            </Link>\n          </div>\n          <Switch>\n            <Route path=\"/users\">\n              <UsersContainer users={this.state.users} prizes={this.state.prizes} subtractFromCount={this.subtractFromCount} handlePrizeClick={this.handlePrizeClick} prize={this.state.prize} show={this.state.show} count={this.state.count} plusTicket={this.plusTicket} />\n            </Route>\n            <Route path=\"/prizes\">\n              <PrizesContainer prepBuyPrize={this.prepBuyPrize} postBuyPrize={this.postBuyPrize} cancelBuyPrize={this.cancelBuyPrize} price={this.state.price} users={this.state.users} prize={this.state.prize} buyPrize={this.state.buyPrize} handleBuyPrizeClick={this.handleBuyPrizeClick} handleShowDeletePrize={this.handleShowDeletePrize} showDeletePrize={this.state.showDeletePrize} closeDeletePrize={this.closeDeletePrize} deletePrize={this.deletePrize} postPrize={this.postPrize} handlePrizeSubmit={this.handlePrizeSubmit} prizes={this.state.prizes} handleAddPrizeClick={this.handleAddPrizeClick} addPrize={this.state.addPrize} bouncyball={this.state.bouncyball} dino={this.state.dino} peppa={this.state.peppa} chalk={this.state.chalk} lizards={this.state.lizards} fish={this.state.fish} />\n            </Route>\n            <Route path=\"/\">\n              <Home user={this.state.user} cancel={this.AddStarNoClick} fetch={this.state.fetch} deleteChild={this.deleteChild} postChild={this.postChild} submitChild={this.submitChild} showAddChild={this.state.addChild} addChild={this.addChild} settings={this.state.settings} handleSettingsClick={this.handleSettingsClick} handleSettingsCancelClick={this.handleSettingsCancelClick} users={this.state.users} count={this.state.count} incrementCount={this.incrementCount} handleStarClick={this.handleStarClick} addTicket={this.state.addTicket} plusTicket={this.plusTicket} />\n            </Route>\n          </Switch>\n        </Router>\n\n  </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}